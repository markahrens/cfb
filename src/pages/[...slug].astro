---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import TeamMasthead from '../components/TeamMasthead.astro';
import slugify from 'slugify';
import contrast from 'get-contrast'

export const prerender = true

export async function getStaticPaths() {
  const teams = await getCollection('teams', ({ data }) => {
    return data.classification !== null;
  });


  return teams
      .map(team => {
          return {
              params: { slug: slugify(team.data.school, {lower: true}) },
              props: team
          }
      });
};



const team = Astro.props;
let teamColor = '#000';
let textColor = '#FFF';
if(team.data.color) {
  teamColor = team.data.color
}
if(!contrast.isAccessible(teamColor, textColor)) {
  textColor = '#000';
}

---

<BaseLayout pageTitle={`${team.data.school} |`}>

  <TeamMasthead id={team.data.id}/>

</BaseLayout>



